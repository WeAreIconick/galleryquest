/**
 * Frontend styles for Gallery Quest block.
 *
 * @package GalleryQuest
 */

.gallery-quest-block {
	margin: 0;
	padding: 0;

	.gallery-quest-message {
		padding: 1rem;
		text-align: center;
		color: #666;
	}

	.gallery-quest-filters {
		display: flex;
		flex-wrap: wrap;
		gap: 1rem;
		align-items: flex-end;
		margin-bottom: 2rem;
		padding: 1rem;
		background: #f5f5f5;
		border-radius: 8px;

		.gallery-quest-filter-group {
			flex: 1 1 200px; /* Grow and shrink, but basis of 200px */
			min-width: 200px;
			margin-bottom: 0;
			border: none;
			padding: 0;

			legend {
				font-weight: 600;
				margin-bottom: 0.5rem;
				padding: 0;
				font-size: 0.9rem;
			}

			.gallery-quest-filter-dropdown-wrapper {
				width: 100%;
				max-width: 100%;
			}

			.gallery-quest-filter-select {
				width: 100%;
				padding: 0.5rem;
				border: 1px solid #ddd;
				border-radius: 4px;
				background-color: #fff;
				font-size: 0.9rem;
				cursor: pointer;

				&:focus {
					border-color: #0073aa;
					outline: 2px solid #0073aa;
					outline-offset: -2px;
				}
			}
		}

		.gallery-quest-filter-actions {
			flex: 0 0 auto;
			margin-top: 0;
			margin-bottom: 2px; /* Align visual baseline with inputs */
		}

		.gallery-quest-clear-filters {
			padding: 0.5rem 1rem;
			background: transparent;
			border: 1px solid #ccc;
			border-radius: 4px;
			cursor: pointer;
			font-size: 0.9rem;
			white-space: nowrap;

			&:hover {
				background: #f0f0f0;
			}
		}
	}

	.gallery-quest-grid {
		display: grid;
		grid-template-columns: repeat(var(--gallery-columns, 3), 1fr);
		gap: clamp(0.5rem, 2vw, 2rem);
		margin: 0;
		padding: 0;

		.gallery-quest-item {
			// aspect-ratio: 1 / 1; /* Removed to allow original aspect ratio */
			overflow: hidden;
			border-radius: 8px;
			position: relative;
			transform: translateZ(0);
			backface-visibility: hidden;
			margin-bottom: 1rem; /* Add spacing for variable height items */

			.gallery-quest-item-link {
				display: block;
				width: 100%;
				height: auto; /* Allow height to adjust */
				text-decoration: none;

				img {
					width: 100%;
					height: auto; /* Allow height to adjust */
					object-fit: contain; /* Show full image */
					transition: transform 0.3s ease;
					display: block;
				}
			}

			&:hover {
				/* Removed enlarge on hover effect */
			}
		}
	}
}

/* Hide PhotoSwipe arrows */
.pswp__button--arrow--prev,
.pswp__button--arrow--next {
	display: none !important;
}

// Mobile styles
@media (max-width: 768px) {
	.gallery-quest-block {
		.gallery-quest-filters {
			display: grid;
			grid-template-columns: repeat(3, 1fr); /* 3 columns on mobile */
			gap: 0.75rem;
			align-items: end;

			.gallery-quest-filter-group {
				min-width: 0; /* Allow item to shrink */
				flex: initial; /* Reset flex */
				margin-bottom: 0;
				
				legend {
					font-size: 0.85rem;
					margin-bottom: 0.25rem;
				}

				.gallery-quest-filter-dropdown-wrapper {
					max-width: 100%;
				}
				
				.gallery-quest-filter-select {
					padding: 0.4rem;
					font-size: 0.85rem;
				}
			}

			.gallery-quest-filter-actions {
				grid-column: 1 / -1; /* Span full width */
				width: 100%;
				margin-top: 0.5rem;
				
				.gallery-quest-clear-filters {
					width: 100%;
					text-align: center;
					padding: 0.5rem;
				}
			}
		}

		.gallery-quest-grid {
			grid-template-columns: 1fr;
			gap: 1rem;
		}
	}
}

// Tablet styles
@media (min-width: 769px) and (max-width: 1024px) {
	.gallery-quest-block {
		.gallery-quest-grid {
			// grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); /* Allow user setting to apply */
			gap: 1.5rem;
		}
	}
}
